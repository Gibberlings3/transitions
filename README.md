-------------------------------------------------
---               Transitions                 ---
---    		    for EET		      ---
---                by Lauriel                 ---
-------------------------------------------------

------------------------------------------------------------------------
GENERAL
------------------------------------------------------------------------
This mod requires EET.  It is not compatible with other games at this time.

The Transitions mod will provide a mechanism to remain in the BGI "world" after Sarevok is defeated.  It is aware of, compatible with, and plays off of jastey's Endless BG1 and Imoen Forever mods, though they are not required.

The mods main purpose is to provide seamless transitions between campaigns and to give the player the power to skip or participate in all or sections of SoD content as it fits their character and personal preferences.  It should be noted that there might be mods that expect specific SoD events to have happened prior to reaching BGII.  For example the PC may or may not have opened the portal in Dragonspear, may or may not have been physically present when a certain young girl is murdered. Globals will be set to indicate each major event in which the PC participated.

Progressing through to SoD or BGII areas of the game can be done quickly by talking to Duke Belt inside the Palace and/or by using a custom item he provides after the clean-up quests are finished.  The game can also automatically progress more slowly via a series of optional world event timers even if you never speak with Duke Belt or do anything involving SoD.  

The protagonist can take up residence at the Ducal Palace, also thanks to Duke Belt.  If the protagonist rescued Duke Eltan, he will show his appreciation by awarding the keys to a home.  There is also the possibility for a number of new clean-up quests, depending upon which of Sarevok's followers have been previously eliminated.  BGI and TotSC quests can be finished after Sarevok's death, giving the player control over the order of events, but there may be a time limit if the optional world event timers are installed.

In order to plug the plot hole dealing with Sarevok's sword, he can be given his equipment, either equipped or just in his inventory, so that it can be looted and confiscated after his death.  If you choose to equip his items, the final fight with him might be slightly more difficult.

There is an option for a new bhaal-spawn ability that will be added during the first rest period after defeating Sarevok.  Good and neutral aligned protagonists will receive Cure Serious Wounds and evil aligned protagonists will receive Cause Serious Wounds.  They weren't my first choice.  I wanted Greenstone Amulet's Mind Shield and Algernon's Cloak Charm Creature, but that's a bit more complicated than I can take on at the moment.  It is my desire to put those in at a future time.

------------------------------------------------------------------------
DESCRIPTION
------------------------------------------------------------------------

------------------------------------------------------------------------
1 Main Component (Required)
------------------------------------------------------------------------
Prevents the end of game transition to SoD after Sarevok's death
Allows access to Duke Belt in the Ducal Palace for game advancement
To remain consistent with SoD, the protagonist is offered the room on the 3rd floor as well as the Korlasz Dungeon quest, both of which may be turned down
NOTE: Your party will not be given a key ring when doing the Korlasz quest.  If you want one, you can buy one at various merchants in Baldur's Gate
Allows for skipping or participating in all or just parts of SoD as fits your character
To remain consistent with SoD and BG2, Imoen is offered magic training and given a suitable magic missile skill at the beginning of BG2 if she doesn't currently have one.

Option 1: The "Sarevok died" movie is used as a dream sequence and a new bhaal-spawn power is awarded at the first rest
Option 2: The "Sarevok died" movie is shown as usual after the fight and the new bhaal-spawn power is skipped
Option 3: Just use whatever Endless BG1 has already installed for the end of the fight (of course, only if that mod is already installed).

------------------------------------------------------------------------
2 Sarevok's Equipment (Optional)
------------------------------------------------------------------------
Give Sarevok his sword so we can better explain its movement between games
NOTE: the sword will be confiscated by the Flaming Fist so it can in turn be stolen from the Ducal Palace as per SoD, however the PC will be compensated for the loss by Duke Belt
Add custom armor and helm from Tantalus - Thank you Tantalus for making these available!
The custom BAMs for armor and helmet were created by Tantalus for his Mod "Sarevok Recovery Mod" ( http://www.baldursgate-refugium.de/mods/sarevok-wiederherstellung/ ), licensed under "Creative Commons" von Nicolas Peters. License: CC BY-NC-SA 3.0 ( https://creativecommons.org/licenses/by-nc-sa/3.0/ )
Shout out to jastey for letting me know about these and for the example on how to add them to the game and for letting me hijack her flaming fist healers from her Endless BG1 mod

Option 1: Sarevok's equipment is equipped - this may make the final fight slightly more difficult
Option 2: Sarevok's equipment is just in his inventory - final fight will not be affected
Option 3: Just use whatever Endless BG1 has already installed (of course, only if that mod is actually already installed)

------------------------------------------------------------------------
3 Add Clean Up Quests (Optional)
------------------------------------------------------------------------
Add quests to bring in Sarevok's remaining supporters depending upon who hasn't already been dispatched
This was originally to satisfy the forewarning from Hafiz the gnome from east of Nashkel Mines who says we will battle the 6 that serve Sarevok.  There are various supporters who could have made the list to fulfill that vision.  For example:
	Angelo, Tazok, Semaj, Winski Peroate, Cythandria, Tamoko, Zhalimar Cloudwulfe, and Korlasz
Note: Thanks Guest Glimpse for the Winski idea :)
Note: Shin mentioned that Zhalimar Cloudwulfe and his gang probably is what Hafiz was referring to and I agree.  So these quests are more than to just satisfy Hafiz's vision.  They are to clean up any lingering support for the movement.  It's also possible to sneak by that fight so, in case you have, you now have the opportunity to do what has been foreseen.
Angelo, Tazok, and Semaj are probably already dead from the fight in the Undercity Temple.  But for those that just kill Sarevok and run, they will be able to still get experience for them, as well as some gold.
Winski and Angelo will have some rogue Flaming Fist cronies with them, Tazok some bandits, Zhalimar will have a couple of dopplegangers as well as the surviving members of his crew (Aasim, Alai, Diyab, Gardush and Naaman), Semaj, Cythandria and Tamoko will be alone, and Korlasz has her usual dungeon crawl quest from SoD.  The Korlasz dungeon quest will be offered whether or not this component is installed.
Any and all clean-up quests, including Korlasz's Dungeon crawl, can be skipped.  To skip all of them without being asked about the next and the next, ad nauseum, just reply that you're not a bounty hunter and that Belt will need to hire someone else.
NOTE: Tamoko's quest involves suicide-by-Flaming-Fist.  It may be triggering for some players.  

Option 1: Have survivors of the final battle with Sarevok immediately flee the area when Sarevok dies (to give more clean-up quests)
Option 2: Behavior of the Sarevok's supporters in the final BGI battle is unchanged
Option 3: Option 1 and gentler version of Tamoko's quest
Option 4: Option 2 and gentler version of Tamoko's quest

------------------------------------------------------------------------
4 Clean up townsfolk chatter with reference to Sarevok (Optional)
------------------------------------------------------------------------
An import from Endless BG1 of changes to various townsfolk (only if that mod hasn't been installed already) 

------------------------------------------------------------------------
5 Clean up the wounded from the thieves maze (Optional)
------------------------------------------------------------------------
Remove Winski and Voleta from the thieves' maze and have Denkod inform the group of their whereabouts
Thank you jastey for the idea of using Denkod! :)
If someone in the group wears Sarevok's armor or helm, Denkod will provide some comedic relief
NOTE: If you installed the 3rd component, Winski will disappear from the thieves' maze even if you don't install this component
This will overwrite EBG1 changes to Denkod if they are installed

------------------------------------------------------------------------
6 Have Elminster make an appearance outside the Ducal Palace (Optional)
------------------------------------------------------------------------
Adds back unused original dialogue from BG1
Thank you k4thos for finding this and jastey for letting me know about it :)
This overwrites how EBG1 brings in Elminster if that was installed first.

------------------------------------------------------------------------
7 Duke Eltan's reward - House in front of Palace (Optional)
------------------------------------------------------------------------
NOTE: Duke Eltan will only show up if he was safely delivered to the Harbor Master.  The reward for saving his life is a home the protagonist can call their own.  Duke Eltan will also allow for the finalization of the Scar's Return quest (BG1RE) if you were able to recover his body.  This is a slightly modified version of how jastey handles it in EBG1.
Once a house is selected in-game as the reward, it will be locked, the PC will be given a key, and any actors inside the house will be moved to another location.  The house's contents will remain the same.  If you sell the key, you in essence sell the house.  The key will be among your possessions that are placed in Chateau Irenicus in BG2 for you to find if you didn't sell it previously.

This component prepares the 2nd house to the left of the Ducal Palace as one of the reward options.

------------------------------------------------------------------------
8 Duke Eltan's reward - Cabin in High Hedge (Optional)
------------------------------------------------------------------------
See note in component #7

------------------------------------------------------------------------
9 Duke Eltan's reward - House in Beregost (Optional)
------------------------------------------------------------------------
See note in component #7

This component adds the large grey house in the upper west side of Beregost as one of the reward options from Duke Eltan.

------------------------------------------------------------------------
10 Allow Imoen's magic training to be delayed (Optional)
------------------------------------------------------------------------
This component allows you to control when Imoen leaves your group to train in magic with Duke Liia.  Liia will make the offer when you first go to speak with the Dukes after Sarevok is killed or by the messenger sent when the 8-day timer expires if timers are installed.  With this component, you'll be able to postpone that training.  You may come back at any time to accept.  It will also be one of the options if you remove her from the group.  She will have to leave your group when you advance the game to either SoD or BG2.  Without this component, Imoen will leave the group immediately upon the offer being given.

A special case has been put in for Imoen when the unfinished SoD component of I4E is installed and she's not in training.  Until that component is finished, she will be allowed to stay with the group if she doesn't get poisoned in the attack by Caelar elites.  She won't have any specific SoD dialogue, but you can keep her.  To avoid her being poisoned at the start of SoD, select to rest somewhere other than in the palace.  If she is in training or gets poisoned, it will be up to I4E or BG2 to allow her to rejoin your group.  This special case will no longer be available once the completed version of I4E SoD is installed.

------------------------------------------------------------------------
11 Add World Event Timers (Optional)
------------------------------------------------------------------------
Refugees will start arriving in front of the palace in waves, seven game-days apart starting a week after the death of Sarevok.  Each wave will increase the number of refugees, but all are in front of the palace so overall, this is more of a cosmetic thing and will by no means swamp the city with refugees as it is in SoD.  This is a slightly modified import of jastey's component in Endless BG1.

Ten game-days after the death of Sarevok, the cleanup quests including Korlasz, will become unavailable.  They can be done any time previous.  A messenger will attempt to illicit the aid of the PC after 8 game-days, with the caveat that each stage of the clean up allows for 2 days to reach the next stage before the messenger is sent or the ten-day timer is allowed to expire.  The completion or refusal of the Korlasz dungeon quest or the ten day timer expiring will trigger the dispersion of party members, except for those listed below.  
NOTE: The party will not break up due to this timer if in any of the ToSC areas before the demon is dealt with.  The messenger must find the party and give the 2-day warning before this timer will be allowed to expire and he will not pester them while in ToSC areas before the demon is dispatched.

The following NPCs will remain in the group or will be available to recruit after the party disperses unless a mod changes their default behavior:
	- Alora
	- Branwen
	- Dynaheir
	- Eldoth
	- Faldorn
	- Garrick
	- Imoen if not in training and Liia component installed
	- Kagain
	- Kivan
	- Minsc
	- Monteron
	- Quayle
	- Rasaad
	- Skie
	- Viconia
	- Xan
	- Xzar
	- Yeslick
	- all custom BG1 NPCs unless programmed to leave by their mods
NOTE: If timers are NOT installed, Coran and Safana won't leave your group until you select to start either SoD or BG2.  With timers, they'll run off to Elfsong Tavern together and won't be recruitable. 

Twenty-five game-days after the death of Sarevok or fifteen days after the Korlasz dungeon is completed (which ever is later), Caelar elites will attack and the town of Baldur's Gate will be limited to the SoD version of the city.  They will continue to attack at random intervals with growing forces for another twenty-one game-days or until the PC joins the coalition or until the PC is overwhelmed by them (after which he/she will wake up in Dragonspear castle).  Note: ToSC areas are safe zones until the demon has been dispatched.

If the PC joins the coalition, only recruitable SoD NPCs that aren't required to be in northern SoD areas prior to joining will remain in the group.  This includes:
	- Minsc and Dynaheir
	- Viconia
	- Imoen under certain circumstances:  A special case has been put in for Imoen when the unfinished SoD portion of I4E is installed and she's not in training.  She will be allowed to stay with the group if she doesn't get poisoned in the attack by Caelar elites.  She won't have any specific SoD dialogue until I4E is finished, but you can keep her.  To avoid her being poisoned at the start of SoD, select to rest somewhere other than in the palace.  If she does get poisoneed, it will be up to I4E or BG2 to allow her to rejoin your group.
NOTE: As a default, custom NPCs will leave the party unless they're specifically coded by their respective mods to stay.

Twenty-five game-days after the first Caelar elite attack if the PC isn't working with the coalition, the PC will be arrested and the trial will begin whether the PC was anywhere near Dragonspear or not.  Again, ToSC areas are safe zones until the demon has been dispatched.

There are 2 options for the timer portion:

Option 1: Don't include sailing time to and from Balduran's Isle in the world timers
Option 2: Sailing time (46 days) counts against world timers

------------------------------------------------------------------------
PLANNED FUTURE ENHANCEMENTS
------------------------------------------------------------------------
jastey's palace treasurer
Close any open quests that will be impossible to continue after Sarevok is dead
Clean-up quests should use the quest journal
Check/Update all remaining BG1 NPCs
	- Update Inn rumors
	- Polish how the NPCs flee the Iron Throne HQ
Updated bhaal-spawn powers (mind shield and charm creature)
Scrolling text to cut scene before dream movie starts or after it ends
Group reactions to new dream
Access to a palace physician/cleric
Conversation between Caelar and PC prior to first attack where she asks for his/her help with her cause
Duke Eltan romance
A house across from the Flaming Fist HQ for Eltan to offer as a reward
Make sure all NPCs that joined the PC during BG1 still have their equipment if they show up in Sod or BG2
Distribute group's possessions from the end of SoD to stores in Athkatla 
Make sure new bhaal-spawn powers are removed during BG2 and all are added back in at the end
Clean up unique items that might be duplicated due playing areas out of normal sequence
Make sure there are consequenses to returning to BG before name is cleared
Allow for actual transition to dual-class mage from single classed Imoen during her training with Duke Liia

------------------------------------------------------------------------
COMPATABIITY NOTES
------------------------------------------------------------------------
There are no known compatability issues at this time

------------------------------------------------------------------------
INSTALLATION
------------------------------------------------------------------------
It may be necessary to install transitions before?/after? NPC mods.

NOTE: If you've previously installed the mod, remove it before extracting a new version. To do this, uninstall all previously installed components and delete the mod folder and executables. 

When installing or uninstalling, do not close the DOS window by clicking on the X button! Instead, press the Enter key when instructed to do so.

IMPORTANT: EET_End will need to be reinstalled after installing this mod.
 
General (Windows, Mac OS X, and Linux)

Extract the contents of the mod archive to your game's main directory. 

Windows
On successful extraction, there should be a transitions folder and a setup-transitions.exe file in your game folder. To install, simply double-click setup-transitions.exe and follow the instructions on screen.
Run setup-transitions.exe in your game folder to reinstall, uninstall or otherwise change components.

Mac OS X
The mod is packaged and installed with WeiDU. To install, extract the mod archive, then copy of the contents of the folder into your game folder (the folder which contains the CHITIN.KEY file). If properly extracted, you should have a "transitions" folder, setup-transitions, and setup-transitions.command in your game folder. To install, simply double-click setup-transitions.command and follow the instructions on screen.

Linux
Extract the contents of the mod to the folder of the game you wish to modify. Download the latest version of WeiDU for Linux from https://github.com/WeiDUorg/weidu/releases and copy WeiDU and WeInstall to /usr/bin. Following that, open a terminal and cd to your EET installation directory, run 'tolower' and answer Y to both queries. You can avoid running the second option (linux.ini) if you've already run it once in the same directory. If you're unsure, running tolower and choosing both options is the safest bet.
Run WeInstall transitions in your game folder to install the mod. Then run wine BGMain.exe and start playing. 

If you have installation problems or encounter any bugs, please post your bug report in one of the forum threads.

------------------------------------------------------------------------
CREDITS
------------------------------------------------------------------------
BeamDog / Overhaul Games: for the Infinity Engine and inspiring this mod
K4thos: for giving us the awesome playground (EET) in which to mod
DavidW: for the lovely macros included in alter_script.tpa as well as guidance on encapsulation and immutability
Gwendolyne: for the very handy clone regions tool in GW_Cartes.tpa
Grammarsalad, subtledoctor, grodrigues, Mike1072, and jastey: for the ideas, guidance and help on the tool that provides proper and upper case player1 pronouns (cases.tpa)
Tantalus: BAMs of Sarevok unique items. The BAMs where taken out of Tantalus' Mod "Sarevok Recovery Mod", licensed under "Creative Commons" von Nicolas Peters. Lizenz: CC BY-NC-SA 3.0 ( https://creativecommons.org/licenses/by-nc-sa/3.0/ )
You can all thank subtledoctor for timers having the option to skip sailing times
jastey: Thank you for all the incredible help and the permission to use your Endless BGI mod code
Bubb and CamDawg for helping me get through a cut-scene/override fiasco - LOVE YOU FOREVER!!!
The folks at The Gibberlings Three forums: for never failing to answer my many many questions

------------------------------------------------------------------------
USED TOOLS AND RESSOURCES
------------------------------------------------------------------------
The Transitions Mod was created using the resources provided by the IESDP (https://gibberlings3.github.io/iesdp/index.htm) and with the following software:

Near Infinity			https://github.com/Argent77/NearInfinity/releases/latest
WeiDU					http://www.weidu.org

Modding communities, tutorials and technical assistance:

The Gibberlings Three		http://gibberlings3.net

------------------------------------------------------------------------
HISTORY
------------------------------------------------------------------------
Version 1
-first public release

------------------------------------------------------------------------
LEGAL INFORMATION
------------------------------------------------------------------------
Transitions is unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are property of Wizards of the Coast. ©Wizards of the Coast LLC.
This mod is also not developed, supported, or endorsed by BioWare, Black Isle Studios, Interplay Entertainment Corp., Overhaul Games or Beamdog. All other trademarks and copyrights are property of their respective owners.

The mod uses BAM files from Tantalus' Mod "Sarevok Recovery Mod", licensed under "Creative Commons" von Nicolas Peters. Lizenz: CC BY-NC-SA 3.0 ( https://creativecommons.org/licenses/by-nc-sa/3.0/ ). The Sarevok Unique Items from the Endless BGI Mod and Transitions are therefore licensed under "Creative Commons" von Nicolas Peters.

Endless BG1 components are used with the permission of the mod's author, jastey.


