-------------------------------------------------
---               Transitions                 ---
---                by Lauriel                 ---
-------------------------------------------------

------------------------------------------------------------------------
GENERAL
------------------------------------------------------------------------
This mod requires EET, BG1EE, SoD, or BG2EE.

The Transitions mod's main purpose is to provide seemless transitions between campaigns in EET.  It will  provide a mechanism to remain in the BGI "world" after Sarevok is defeated and BG2 "world" after Irenicus is defeated.  For EET, it also allows for skipping ahead to BG2, skipping all or the remainder of SoD, as suits the player.

Progressing through to SoD or BGII areas of the game is accomplished by using a custom item provided by Duke Belt after the clean-up quests are finished or skipped.  Progressing through to ToB is accomplished by using the Amulet of Selderine provided by Queen Ellesmine.

After Sarevok has been defeated, the protagonist can take up residence at the Ducal Palace (requires SoD), thanks to Duke Belt.  If the protagonist rescued Duke Eltan and EET is loaded, he will show his appreciation by awarding the keys to a home.  There is also the possibility for a number of new clean-up quests, depending upon which of Sarevok's followers have been previously eliminated.  BGI and TotSC quests can be finished after Sarevok's death, giving the player control over the order of events.

In order to plug the plot hole dealing with Sarevok's sword, he can be given his equipment, either equipped or just in his inventory, so that it can be looted and confiscated after his death.  If you choose to equip his items, the final fight with him might be slightly more difficult.

The possible plot hole dealing with Imoen's ability to cast magic missile can also be dealt with.

There is an option for a new bhaal-spawn ability that will be added during the first rest period after defeating Sarevok.  Good and neutral aligned protagonists will receive Cure Serious Wounds and evil aligned protagonists will receive Cause Serious Wounds.  They weren't my first choice.  I wanted Greenstone Amulet's Mind Shield and Algernon's Cloak Charm Creature, but that's a bit more complicated than I can take on at the moment.  It is my desire to put those in at a future time.

------------------------------------------------------------------------
DESCRIPTION
------------------------------------------------------------------------

------------------------------------------------------------------------
Main Component - required for most, but not all, content
------------------------------------------------------------------------
Prevents the end of game transition to SoD after Sarevok's death  
Prevents the end of game transition to ToB after Irenicus's death  
Allows access to Duke Belt in the Ducal Palace for game advancement  
To remain consistent with SoD, when SoD is present the protagonist is offered the room on the 3rd floor as well as the Korlasz Dungeon quest, both of which may be turned down  
Also to remain consistent with SoD, when SoD is present Liia recruits Imoen for magic training but with an optional component you'll be able to affect the timing  
If SoD is installed, the Korlasz dungeon quest will be a regular skippable clean-up quest, with no tour-guide Imoen, and allowing you to come and go as you please (via Duke Belt at the moment)
NOTE: Your party will not be given a key ring when doing the Korlasz quest.  If you want one, you can buy one at various merchants in Baldur's Gate when SoD is present
Allows for skipping all or the remainder of SoD in EET

------------------------------------------------------------------------
New Bhaal-spawn power
------------------------------------------------------------------------
Use the "Sarevok died" movie as a dream sequence and award new bhaal-spawn power at the first rest
Requires Main Component and BG1EE or EET

------------------------------------------------------------------------
Sarevok's Equipment
------------------------------------------------------------------------
Give Sarevok his sword so we can better explain its movement between games  
Add Sarevok's custom armor and helm from Tantalus
NOTE: the sword will be confiscated by the Flaming Fist so it can in turn be stolen from the Ducal Palace as per SoD, however the PC will be compensated for the loss by Duke Belt  
Requires Main Component and BG1EE or EET

Option 1: Sarevok's equipment is equipped - this may make the final fight slightly more difficult  
Option 2: Sarevok's equipment is just in his inventory - final fight will not be affected  
Option 3: When installed, use how Endless BG1 handles Sarevok's equipment

------------------------------------------------------------------------
Add Clean Up Quests
------------------------------------------------------------------------
Add quests to bring in Sarevok's remaining supporters depending upon who hasn't already been dispatched  
The Korlasz dungeon quest will be offered whether or not this component is installed.  
Any and all clean-up quests, including Korlasz's Dungeon crawl if SoD is installed, can be skipped.  To skip all of them without being asked about the next and the next, ad nauseum, just reply that you're not a bounty hunter and that Belt will need to hire someone else.  
NOTE: Tamoko's quest involves suicide-by-Flaming-Fist.  It may be triggering for some players.  
Requires Main Component and BG1EE or EET

Option 1: Have survivors of the final battle with Sarevok immediately flee the area when Sarevok dies (to give more clean-up quests)  
Option 2: Behavior of the Sarevok's supporters in the final BGI battle is unchanged  
Option 3: Option 1 and gentler version of Tamoko's quest  
Option 4: Option 2 and gentler version of Tamoko's quest  

------------------------------------------------------------------------
Clean up townsfolk chatter with reference to Sarevok
------------------------------------------------------------------------
An import from Endless BG1 of changes to various townsfolk.  
Skipped if it's already installed via EBG1  
Requires Main Component and BG1EE or EET

------------------------------------------------------------------------
Clean up the wounded from the thieves maze
------------------------------------------------------------------------
Remove Winski and Voleta from the thieves' maze and have Denkod inform the group of their whereabouts  
If someone in the group wears Sarevok's armor or helm, Denkod will provide some comedic relief  
NOTE: If you installed the 3rd component, Winski will disappear from the thieves' maze even if you don't install this component  
This will overwrite EBG1 changes to Denkod if they are installed  
Requires Main Component and BG1EE or EET

------------------------------------------------------------------------
Have Elminster make an appearance outside the Ducal Palace
------------------------------------------------------------------------
Adds back unused original dialogue from BG1  
Skipped if it's already installed via EBG1  
Requires Main Component and BG1EE or EET

------------------------------------------------------------------------
Duke Eltan's reward - House in front of Palace
------------------------------------------------------------------------
Requires Main Component and EET
NOTE: Duke Eltan will only show up if he was safely delivered to the Harbor Master.  The reward for saving his life is a (one - no matter how many are installed as options) home the protagonist can call their own.  

Once a house is selected in-game as the reward, it will be locked, the PC will be given a key, and any actors inside the house will be moved to another location.  The house's contents will remain the same.  If you sell the key, you in essence sell the house.  The key will be among your possessions that are placed in Chateau Irenicus in BG2 for you to find if you didn't sell it previously.  

This component prepares the 2nd house to the left of the Ducal Palace as one of the reward options.  

------------------------------------------------------------------------
Duke Eltan's reward - Cabin in High Hedge
------------------------------------------------------------------------
Requires Main Component and EET
See note in component #7  

This component adds the cabin in High Hedge as one of the reward options from Duke Eltan.  This house is used in various other mods (Ascalon's Questpack and Glam's NPC Pack), so you may want to not select it in-game as your reward if those mods are installed and still using it.  Installing it, however, shouldn't affect those mods.

------------------------------------------------------------------------
Duke Eltan's reward - House in Beregost
------------------------------------------------------------------------
Requires Main Component and EET
See note in component #7  

This component adds the large gray house in the upper west side of Beregost as one of the reward options from Duke Eltan.  

------------------------------------------------------------------------
Add waves of refugees to Baldur's Gate
------------------------------------------------------------------------
Refugees will start arriving in front of the palace in waves, seven game-days apart starting a week after the death of Sarevok.  Each wave will increase the number of refugees, but all are in front of the palace so overall, this is more of a cosmetic thing and will by no means swamp the city with refugees as it is in SoD.  This is a slightly modified import from EBG1.
Skipped if it's already installed via EBG1.  
Requires Main Component and BG1EE or EET

------------------------------------------------------------------------
Allow Imoen's magic training to be delayed
------------------------------------------------------------------------
This component allows you to control when Imoen leaves your group to train in magic with Duke Liia.  Liia will make the offer when you first go to speak with the Dukes after Sarevok is killed.  With this component, you'll be able to postpone that training.  You may come back at any time to accept.  It will also be one of the options if you remove her from the group.  She will have to leave your group when the game advances to SoD.  Without this component, Imoen will leave the group immediately upon the offer being given.  
Requires Main Component an BG1EE or EET

------------------------------------------------------------------------
Give Imoen a special wand of Magic Missiles
------------------------------------------------------------------------
In case Imoen hasn't been dualed to a mage, she is given a special wand of magic missiles for her to use in the fight against Caelar's elite forces at the beginning of SoD.  The wand will be able to cast multiple magic missiles.
Requires SoD or EET

------------------------------------------------------------------------
Give Imoen innate Magic Missile
------------------------------------------------------------------------
In case Imoen hasn't been dualged to a mage, she is given the innate ability to cast magic missile twice at the beginning of BG2.  A potion will be provided in Chateau Irenicus for her to use to make sure she is capable of casting it when they arrive at the promenade.  
Requires BG2 or EET

------------------------------------------------------------------------
Add a little snark
------------------------------------------------------------------------
Just adds some fun snarky comments to otherwise stuffy or inane dialogue
Requires SoD, BG2 or EET

------------------------------------------------------------------------
Use abbreviated capture scene leading to BG2
------------------------------------------------------------------------
Cut out the long fight scene leading to capture prior to BG2 and just show a brief cut-scene.  Only available when skipping ahead via the item given by Duke Belt,   
Requires Main Component and EET

------------------------------------------------------------------------
Use Irenicus in hell movie to restore Bhaal-spawn powers when he is defeated
------------------------------------------------------------------------
While recuperating in Suldanessellar, the Irenicus in hell movie will be shown as a dream and all Bhaal-spawn powers will be restored.  
Requires BG2EE or EET

------------------------------------------------------------------------
PLANNED FUTURE ENHANCEMENTS
------------------------------------------------------------------------
* Close any open quests that will be impossible to continue after Sarevok is dead
* Clean-up quests should use the quest journal
* Updated bhaal-spawn powers (mind shield and charm creature)
* Use scrolling text box mechanism before dream movie starts or after it ends with narration
* Narration added to modified start of SoD scrolling text
* Add group reactions to new dream
* Put in jastey's palace treasurer
* Allow access to a palace physician/cleric (Fenster?)
* Check/Update all remaining BG1 NPCs
	* - Update Inn rumors
	* - Polish how the NPCs flee the Iron Throne HQ
* Have a conversation between Caelar and PC prior to first attack where she asks for his/her help with her cause to have Caelar's surprise at the PC's reluctance to help her seem a bit more reasonable.
* Put in a regular travel region entrance to the Korlasz crypt to be accessable only during the quest
* Add better Korlasz loot to stores if quest is skipped
* Add a romance with Duke Eltan
* Add a house across from the Flaming Fist HQ for Eltan to offer as a reward
* Change mechanism on how gold is shared with group so it always happens, even without standard NPCs
* Remove references to PC being a bhaalspawn from NPCs that shouldn't know about it
* Add option to ditch tour-guide Corwin
* Add 'Scout the Coastway Bridge' quest
* Add reactions and possible options when the annotated book 'A Historical Treatise of Dragonspear Castle' is found
* Distribute group's possessions from the end of SoD to stores in Athkatla 
* Add soul dagger to Chateau Irenicus if Cost of One Girl's Soul isn't loaded
* Make sure there are consequences to returning to city of BG before name is cleared
* Add bounty hunter attacks until name cleared in Baldur's Gate
* Add quick Fed Ex quest to hand in soul dagger and stop attacks from bounty hunters and clear name
* Add comments about wanted posters to heads of temples, order of radiant heart and shadow thieves as well as some SoD NPCs such as Dorn
* Make sure all NPCs that joined the PC during BG1 still have their equipment if they show up in Sod or BG2, even as a cameo (Ajantis)
* Move BG1 personal chest contents to a stronghold chest with compliments of dukes when name is cleared
* Clean up unique items that might be duplicated due to playing areas out of normal sequence
* Allow for actual transition to dual-class mage from single classed Imoen during her training with Duke Liia
* Add a romance with Queen Ellesime
* Move BG1/SoD personal chest contents to a pocket plane chest with comments by the imp
* Add a "continue the adventure" ending with Bhaalspawn powers intact

------------------------------------------------------------------------
COMPATIBILITY NOTES
------------------------------------------------------------------------
There are no known compatability issues at this time

------------------------------------------------------------------------
INSTALLATION
------------------------------------------------------------------------
If installing EBG1 (https://www.gibberlings3.net/forums/forum/217-endless-bg1/), do so before Transitions.  
Install before BG1RE (https://www.gibberlings3.net/forums/forum/131-romantic-encounters-bg2/) in order to complete Scar Returns quest after Sarevok is defeated.  
Transitions should be installed before NPC mods.  

Installation using Project Infinity (https://forums.beamdog.com/discussion/comment/1145416/#Comment_1145416) will ensure this and other mods are installed in the correct order.

NOTE: If you've previously installed the mod, remove it before extracting a new version. To do this, uninstall all previously installed components and delete the mod folder and executables. 

When installing or uninstalling, do not close the DOS window by clicking on the X button! Instead, press the Enter key when instructed to do so.

IMPORTANT: EET_End will need to be reinstalled after installing this mod.
 
General (Windows, Mac OS X, and Linux)

Extract the contents of the mod archive to your game's main directory. 

Windows
On successful extraction, there should be a transitions folder and a setup-transitions.exe file in your game folder. To install, simply double-click setup-transitions.exe and follow the instructions on screen.
Run setup-transitions.exe in your game folder to reinstall, uninstall or otherwise change components.

Mac OS X
The mod is packaged and installed with WeiDU. To install, extract the mod archive, then copy of the contents of the folder into your game folder (the folder which contains the CHITIN.KEY file). If properly extracted, you should have a "transitions" folder, setup-transitions, and setup-transitions.command in your game folder. To install, simply double-click setup-transitions.command and follow the instructions on screen.

Linux
Extract the contents of the mod to the folder of the game you wish to modify. Download the latest version of WeiDU for Linux from https://github.com/WeiDUorg/weidu/releases and copy WeiDU and WeInstall to /usr/bin. Following that, open a terminal and cd to your EET installation directory, run 'tolower' and answer Y to both queries. You can avoid running the second option (linux.ini) if you've already run it once in the same directory. If you're unsure, running tolower and choosing both options is the safest bet.
Run WeInstall transitions in your game folder to install the mod. Then run wine BGMain.exe and start playing. 

If you have installation problems or encounter any bugs, please post your bug report in the forum thread: https://www.gibberlings3.net/forums/topic/31868-transitions-mod-for-eet/.

------------------------------------------------------------------------
CREDITS
------------------------------------------------------------------------
* BeamDog / Overhaul Games: for the Infinity Engine and inspiring this mod
* K4thos: for giving us the awesome playground (EET) in which to mod
* DavidW: for the lovely macros included in alter_script.tpa as well as for guidance on encapsulation and immutability
* Gwendolyne: for the very handy clone regions tool in GW_Cartes.tpa
* G3 guest Gob Oafenplug: for the new code for change_door_name.tpa 
* Grammarsalad, subtledoctor, grodrigues, Mike1072, and jastey: for the ideas, guidance and help on the tool that provides proper and upper case player1 pronouns (cases.tpa)
* Tantalus: BAMs of Sarevok unique items. The BAMs where taken out of Tantalus' Mod "Sarevok Recovery Mod", licensed under "Creative Commons" von Nicolas Peters. Lizenz: CC BY-NC-SA 3.0 ( https://creativecommons.org/licenses/by-nc-sa/3.0/ )
* jastey: Thank you for all the incredible help and the permission to use your Endless BGI mod code:
	- modified version of Sarevok's custom items from Tantalus
	- modified versions	Flaming Fist Healers after the Sarevok fight
	- modified version of Denkod
	- import of town chatter component
	- modified version of Elminster's appearance at Ducal palace
	- modified version of servant who welcomes PC to their room
	- modified version of guards in front of the palace
	- modified version of refugees 
* Bubb and CamDawg for helping me get through a cut-scene/override fiasco, arrays syntax, and showing me that EVAL EVAL is an actual thing (who'd a thunk!) - LOVE YOU FOREVER!!!
* Bubb again for showing me how to fix TriggerOverride. Thank you thank you thank you!!!
* igi: for persmission to modify his Refreshment potion from iiItemMod for Imoen to use after Chateau Irenicus
* Thank you beta testers and proofreaders!: jastey and igi :)
* The folks at The Gibberlings Three forums: for never failing to answer my many many questions

------------------------------------------------------------------------
NOTES ON THE CLEAN-UP QUESTS
------------------------------------------------------------------------
These were originally to satisfy the forewarning from Hafiz the gnome from east of Nashkel Mines who says we will battle the 6 that serve Sarevok.  There are various supporters who could have made the list to fulfill that vision.  For example:  
	Angelo, Tazok, Semaj, Winski Peroate, Cythandria, Tamoko, Zhalimar Cloudwulfe, and Korlasz  
Note: Thanks Guest Glimpse for the Winski idea :)  
Note: Shin mentioned that Zhalimar Cloudwulfe and his gang probably is what Hafiz was referring to and I agree.  So these quests are more than to just satisfy Hafiz's vision.  They are to clean up any lingering support for the movement.  It's also possible to sneak by that fight so, in case you have, you now have the opportunity to do what has been foreseen.  
Angelo, Tazok, and Semaj are probably already dead from the fight in the Undercity Temple.  But for those that just kill Sarevok and run, they will be able to still get experience for them, as well as some gold.
Winski and Angelo will have some rogue Flaming Fist cronies with them, Tazok some bandits, Zhalimar will have a couple of dopplegangers as well as the surviving members of his crew (Aasim, Alai, Diyab, Gardush and Naaman), Semaj, Cythandria and Tamoko will be alone, and Korlasz has her usual dungeon crawl quest from SoD.

------------------------------------------------------------------------
USED TOOLS AND RESSOURCES
------------------------------------------------------------------------
The Transitions Mod was created using the resources provided by the IESDP (https://gibberlings3.github.io/iesdp/index.htm) and with the following software:

* Near Infinity			https://github.com/Argent77/NearInfinity/releases/latest
* WeiDU					http://www.weidu.org

Modding communities, tutorials and technical assistance:

The Gibberlings Three		http://gibberlings3.net

------------------------------------------------------------------------
HISTORY
------------------------------------------------------------------------
still in beta

------------------------------------------------------------------------
LEGAL INFORMATION
------------------------------------------------------------------------
Transitions is unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are property of Wizards of the Coast. Â©Wizards of the Coast LLC.
This mod is also not developed, supported, or endorsed by BioWare, Black Isle Studios, Interplay Entertainment Corp., Overhaul Games or Beamdog. All other trademarks and copyrights are property of their respective owners.

The mod uses BAM files from Tantalus' Mod "Sarevok Recovery Mod", licensed under "Creative Commons" von Nicolas Peters. Lizenz: CC BY-NC-SA 3.0 ( https://creativecommons.org/licenses/by-nc-sa/3.0/ ). The Sarevok Unique Items from the Endless BGI Mod and Transitions are therefore licensed under "Creative Commons" von Nicolas Peters.

Endless BG1 components are used with the permission of the mod's author, jastey.

The Refreshment Potion BAM file from the iiItem mod is used for the Revitalization Potion with the permission of the mod's author, igi. 

